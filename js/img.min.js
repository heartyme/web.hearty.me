"use strict";var msnry,btn_alias="img";function imagesLoadedAndLayout(n){return msnry||(msnry=new Masonry(".img_wall",{itemSelector:".img_wall .img-loaded",columnWidth:24,gutter:20,percentPosition:!0,transitionDuration:"0.3s"})),new Promise(e=>{imagesLoaded(n).on("progress",(n,e)=>{e.img.parentNode.classList.add("img-loaded"),msnry.appended(e.img.parentNode),msnry.layout()}).on("done",()=>{msnry.once("layoutComplete",()=>{e()})})})}function img_carousel(n){n=n||3e4,$("html,body").stop().animate({scrollTop:$(".bouncingLoader").offset().top},n,function(){$(this).animate({scrollTop:0},n,function(){img_carousel(n)})})}function img_scrolltop(n){(n||$("html,body")).stop().scrollTop(0)}function read_post(n){if((n=n||0)<1||"undefined"==typeof hj_username)hj_href("account");else{let e=hj_username+"/"+n;/iOS|Android/i.test(check_hjapp())?window.open(location.origin+"/"+e,"_blank"):hj_href(e)}}hj_getScript("//cdn.jsdelivr.net/combine/npm/@webcreate/infinite-ajax-scroll@3.1.0/dist/infinite-ajax-scroll.min.js,npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js,npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js").then(function(){$(function(){let n=new InfiniteAjaxScroll(".img_wall",{item:".img_wall figure",next:".pager_next",pagination:".pager",bind:!1,spinner:{element:".bouncingLoader",delay:600}});n.on("append",function(n){let e=n.appendFn;n.appendFn=(n,i,t)=>new Promise(o=>{e(n,i,t),imagesLoadedAndLayout(n).then(o)})}),n.on("appended",function(n){0==n.items.length&&$(".no_more").fadeIn()}),imagesLoadedAndLayout(".img_wall").then(function(){n.bind()}),$(".pager").hide().delay(1e3).queue(function(){$(".img .vip_only").length>0&&img_carousel(),$(this).dequeue()})})}),$(function(){$(".mh-head .left").on("click",function(){nav_toggle($(".menu"),!0)}),$(".nav_btn[data-gotop]").on("click",function(){img_scrolltop()}),$(".nav_btn[data-add],.img_empty").on("click",function(){hj_href("d?img=1")}),$(".vip_only").on("click",function(){hj_href("d?plans=1")}),$(document).on("click",".img_wall img[data-post_id]",function(){read_post(this.dataset.post_id)}),post_font(),document.title=_h("I-title")+" | \uD83D\uDC9D Hearty Journal 溫度日記"});