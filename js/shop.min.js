"use strict";function bill(t){null==t||""==t?msg('<i class="fal fa-gift-card"></i>'+_h("o-plan-2")):hj_href("shop/bill?o="+t)}function bill_reload(){setTimeout(function(){let t=new URL(location.href);t.searchParams.has("reload")?setcookie("hearty_3ds",0,2):(hj_loading(!0),t.searchParams.set("reload",1),location.href=t)},3e3)}function bill_share(){let t=location.href.replace(location.host,"hearty.app");/iOS|Android/i.test(check_hjapp())?location.assign("//hearty.me/wv?s="+encodeURIComponent(t.replace(/(^\w+:|^)\/\//,""))):is_touch_device()&&"share"in navigator?navigator.share({title:document.title,url:t}).catch(function(t){}):(alertify.set({labels:{ok:_h("o-back"),cancel:'<i class="fas fa-copy"></i> '+_h("o-url-1")},buttonReverse:!0}),alertify.prompt('<i class="fal fa-file-alt"></i> '+_h("o-url-0")+'<br><br><a class="qrcode"></a>',function(t){t||hj_copy($("#alertify .alertify-text"))},t),alertify_input_custom({type:"url",inputmode:"none",placeholder:t,onclick:"hj_copy($(this))"},{cursor:"copy"}),get_qrcode($("#alertify .qrcode"),t))}function bill_screenshot(t,e){hj_loading(!0),t=t||$(".bill_payment"),hj_getScript_npm("html2canvas@1.4.1/dist/html2canvas.min.js",function(){window.html2canvas(t.get(0),{useCORS:!0,scale:window.devicePixelRatio,width:t.get(0).offsetWidth,height:t.get(0).offsetHeight}).then(function(t){$(".btn_screenshot_download").removeAttr("onclick").attr({target:"_blank",href:t.toDataURL("image/png"),download:"Hearty-Journal_"+e+".png"}).get(0).click()}).finally(function(){hj_loading(!1)})})}function bill_screenshot_compress(t,e){hj_loading(!0),t=t||$(".bill_payment"),$.getScript("//cdn.jsdelivr.net/combine/npm/html2canvas@1.4.1/dist/html2canvas.min.js,npm/compressorjs@1.2.1/dist/compressor.min.js",function(){window.html2canvas(t.get(0),{useCORS:!0,scale:window.devicePixelRatio,width:t.get(0).offsetWidth,height:t.get(0).offsetHeight}).then(function(t){let a=t.toDataURL("image/png"),n=$(".btn_screenshot_download").removeAttr("onclick").attr({target:"_blank",download:"Hearty-Journal_"+e+".png"});t.toBlob(function(t){new Compressor(t,{quality:.9,mimeType:"image/jpeg",success(t){let a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){let t=a.result;n.attr({href:t,download:"Hearty-Journal_"+e+".jpg"}).get(0).click()}},error(t){n.attr({href:a}).get(0).click()}})},"image/png")}).finally(function(){hj_loading(!1)})})}function sales_tracking(t,e,a){let n=pkg_info(e);if(!n)return!1;switch(t){case"purchase":if(!getUrlPara("pay"))return;affiliates_cps(e,a,n.subtotal),t={g:"purchase",f:"Purchase"};break;case"checkout":t={g:"begin_checkout",f:"InitiateCheckout"};break;default:t={g:"remove_from_cart",f:"RemoveFromCart"}}if(ga_evt_push(t.g,{items:[{item_id:e,item_name:"VIP Premium",item_variant:(e>4?"Prepaid":"Monthly")+" Plan",quantity:n.quantity,price:n.unit}]}),fb_evt_push(t.f,{content_type:"product",content_name:"VIP Premium",contents:[{id:e,quantity:n.quantity}],value:n.subtotal,num_items:1,currency:"TWD"}),"undefined"!=typeof _lt)try{_lt("send","cv",{type:"Purchase",value:n.subtotal,currency:"TWD"},["91b6ece5-a435-4ac9-9119-d8973be6322e"])}catch(i){}}function pkg_info(t){let e={1:{unit:50,subtotal:600,quantity:12},2:{unit:149,subtotal:447,quantity:3},3:{unit:109,subtotal:654,quantity:6},4:{unit:89,subtotal:1068,quantity:12},5:{unit:33,subtotal:99,quantity:3},6:{unit:99,subtotal:99,quantity:1}};return t in e&&e[t]}function affiliates_cps(t,e,a){let n={2:"season",3:"semi-annual",4:"annual",5:"monthly"}[t]||"";if(n)try{var i,o,r,s,c,l,u;let f,h;f={step:n},(e=e||"")&&(f.order=e),parseInt(a)>0&&(f.orderTotal=a),h={whiteLabel:{id:8,siteId:2640,domain:"t.adotone.com"},conversion:!0,conversionData:f,locale:"en-US",mkt:!0},r="script",s="//cdn.adotone.com/javascripts/va.js",i=window,o=document,c=h,i.VARemoteLoadOptions=c,l=o.createElement(r),u=o.getElementsByTagName(r)[0],l.async=1,l.src=s,u.parentNode.insertBefore(l,u),h=JSON.stringify(h),gform_post("1FAIpQLSc114FBksG_IRL82X2jRxIEap9UIi3X1Vj6wLuZqY23zsQTPw",{emailAddress:getcookie("hearty_em")||"guest@hearty.me","entry.2046581741":e,"entry.434422115":a,"entry.1958440920":getcookie("hearty_u"),"entry.803572147":getcookie("hearty_id"),"entry.1027128888":h,"entry.206183814":today(8),"entry.858322988":navigator.userAgent||""}),console.log("Affiliates CPS: "+h)}catch(m){}}